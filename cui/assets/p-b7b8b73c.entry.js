/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{r as t,k as s,i,H as r,j as e}from"./p-18a64bdb.js";import{m as o}from"./p-c7bc8265.js";import{c as n,d as a}from"./p-e506e796.js";import{c as l,ae as h,af as c}from"./p-675e89df.js";import"./p-0462f723.js";const m=class{constructor(r){t(this,r);this.downloadEventTriggered=s(this,"downloadEventTriggered",7);this.downloadIcon=()=>i("mq-icon",{backgroundColor:"transparent",name:"download",strokeColor:"var(--styles-icons-iconDefaultColor)"});this.fetchSignedUrl=async()=>{try{this.isLoading=true;const t=l.get(h);const s=await t.execute(this.issuedDate);const{signed_url:i,state:r}=s;this.assetStatus=r;if(this.assetStatus===c.FAILED||this.assetStatus===c.PENDING){this.errorMessage=this.assetStatus===c.PENDING?n:a}else{const{pdf:t}=i;this.signedUrl=t;window.open(this.signedUrl,"_blank");this.errorMessage="";this.downloadEventTriggered.emit()}}catch(t){console.error(t);this.errorMessage=a}finally{this.isLoading=false}};this.renderErrorMessage=()=>{if(!this.errorMessage){return null}return i("div",{class:"mq-statement-asset-error"},i("mq-icon",{name:"caution",strokeColor:`var(--styles-icons-icon${this.assetStatus===c.PENDING?"InfoColor":"ErrorColor"})`,backgroundColor:"transparent"}),i("mq-text",{colorType:this.assetStatus===c.PENDING?"info":"error"},this.errorMessage))};this.handleKeyDown=t=>{if(t.code==="Enter"||t.code==="Space"){this.fetchSignedUrl()}};this.renderDownloadCTA=()=>{if(this.isLoading){return i("mq-lottie-animation",{id:"statement-asset-downloading",loop:true,animation:"spinner",svgStyleObject:{color:"var(--colors-primary-primary500)"}})}else if(this.assetStatus===c.FAILED){return}else if(this.signedUrl){return i("mq-hyperlink",{href:this.signedUrl,target:"_blank"},this.downloadIcon())}else{return i("div",{tabIndex:0,class:"mq-statement-asset-download",onClick:this.fetchSignedUrl,"aria-label":"download",onKeyDown:t=>this.handleKeyDown(t)},this.downloadIcon())}};this.cardholderToken="";this.issuedDate="";this.readableIssuedDate="";this.signedUrl="";this.isLoading=false;this.errorMessage=null;this.assetStatus=undefined}render(){if(!o.mqCuiReady){return null}return i(r,{"test-id":this.issuedDate},i("tr",{class:"mq-statement-row"},i("td",null,i("mq-text",null,this.readableIssuedDate),this.renderErrorMessage()),i("td",null,this.renderDownloadCTA())))}static get assetsDirs(){return["public"]}get el(){return e(this)}};export{m as mq_statement_asset};
//# sourceMappingURL=p-b7b8b73c.entry.js.map