/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{r,k as i,i as t}from"./p-18a64bdb.js";import{c as e,B as a,N as s,C as o}from"./p-675e89df.js";import{A as n}from"./p-52af63d3.js";import{o as c,m as d}from"./p-c7bc8265.js";import{c as l}from"./p-ac7db7a1.js";import{b as p}from"./p-ac6d60ea.js";import{C as h}from"./p-cb5bbf71.js";import"./p-0462f723.js";const u=".card-list-container{width:100%;padding:var(--components-universal-padding);background-color:var(--components-universal-backgroundColor);border-radius:var(--components-universal-borderRadius);border:var(--components-universal-borderWidth) solid var(--components-universal-borderColor)}.card-list{width:100%;background-color:var(--styles-background-surfacePrimaryColor);border-radius:var(--borderRadius-radius200);border:var(--styles-border-borderWidth) solid var(--styles-border-borderDefaultColor);border-collapse:collapse}.card-list-item{width:100%;padding:var(--spacing-spacing400);display:flex;cursor:pointer;outline:none;z-index:0;user-select:none}.card-list-item:hover{z-index:1;background:var(--styles-background-surfacePrimaryHoverColor)}.card-list-item:first-child:hover{border-top-left-radius:var(--borderRadius-radius200);border-top-right-radius:var(--borderRadius-radius200)}.card-list-item:last-child:hover{border-bottom-left-radius:var(--borderRadius-radius200);border-bottom-right-radius:var(--borderRadius-radius200)}.card-list-item:active{background:var(--styles-background-surfacePrimaryActiveColor)}.card-list-item:first-child:active{border-top-left-radius:var(--borderRadius-radius200);border-top-right-radius:var(--borderRadius-radius200)}.card-list-item:last-child:active{border-bottom-left-radius:var(--borderRadius-radius200);border-bottom-right-radius:var(--borderRadius-radius200)}.card-list-item:focus-visible{outline:2px solid var(--styles-border-focusOutlineColor);outline-offset:2px;z-index:2}.card-list-item:hover,.card-list-item:active{z-index:1;position:relative;user-select:auto}.card-list-item:focus-visible:active{background:var(--styles-background-surfacePrimaryActiveColor)}.card-list-item:first-child:focus-visible{border-top-left-radius:var(--borderRadius-radius200);border-top-right-radius:var(--borderRadius-radius200)}.card-list-item:last-child:focus-visible{border-bottom-left-radius:var(--borderRadius-radius200);border-bottom-right-radius:var(--borderRadius-radius200)}.card-list-item-arrow{margin-left:auto;margin-top:var(--spacing-spacing100)}.card-list-item-img-container{width:3.75rem;height:2.25rem;border-radius:var(--borderRadius-radius100)}.card-img-container{position:relative;width:75px;height:50px;margin-right:var(--spacing-spacing200)}.bones .content{flex-direction:row;gap:var(--spacing-spacing400);padding:var(--spacing-spacing600)}.card-list-error{padding:var(--spacing-spacing1000) var(--spacing-spacing600)}.card-list-error-refresh{cursor:pointer;padding:var(--spacing-spacing200) var(--spacing-spacing400)}.card-list-error-refresh:focus-visible{outline:2px solid var(--styles-border-focusOutlineColor);outline-offset:2px;border-radius:var(--borderRadius-radius200)}@media screen and (max-width: 480px){.bones .content{flex-direction:column;gap:var(--spacing-spacing600);padding:var(--spacing-spacing600) var(--spacing-spacing600) var(--spacing-spacing800)}.bones .footer>mq-bone>.mq-bone{width:100%}}";const m=u;var g;(function(r){r["CARD_SELECTED"]="CARD_SELECTED"})(g||(g={}));const b=class{constructor(c){r(this,c);this.mqCardListLoadInitiated=i(this,"mqCardListLoadInitiated",7);this.mqCardListLoadCompleted=i(this,"mqCardListLoadCompleted",7);this.mqCardListActionHook=i(this,"mqCardListActionHook",7);this.loadEnvConfigVars=()=>{const r=e.get(a);this.cuiCardArtBaseUrl=r.execute("CDN_CARD_ART_BASE_URL")};this.loadCards=async()=>{this.isLoading=true;this.errorMessage=null;try{await this.tryToLoadCards()}catch(r){this.handleLoadCardsError(r)}finally{this.isLoading=false}};this.tryToLoadCards=async()=>{const r=e.get(s);const i=await r.execute();const t=i.map((r=>l(r)));this.cards=t;const a=await o();this.programShortCode=a;setTimeout((()=>this.mqCardListLoadCompleted.emit({status:h.SUCCESS})),0);n.CardManagement.loadCardsSuccess()};this.handleLoadCardsError=r=>{const i=r;this.errorMessage=i.message;n.CardManagement.Exception(i.message);this.mqCardListLoadCompleted.emit({status:h.ERROR,error:{code:"LOAD_CARDS_ERROR"}});n.CardManagement.loadCardsError()};this.handleSelectCard=r=>{n.CardManagement.cardSelectorTriggered();try{this.mqCardListActionHook.emit({type:g.CARD_SELECTED,data:{cardToken:r}});n.CardManagement.cardSelectedSuccess()}catch(r){n.CardManagement.cardSelectedError()}};this.handleImageLoad=r=>{this.backgroundImageLoaded=Object.assign(Object.assign({},this.backgroundImageLoaded),{[r]:true})};this.handleImageError=r=>{this.useFallbackImage=Object.assign(Object.assign({},this.useFallbackImage),{[r]:true})};this.getCardArt=r=>{var i;const t={visa:"visa-card-art",mastercard:"mastercard-card-art",pulse:"pulse-card-art"};const e=(i=r.productType)===null||i===void 0?void 0:i.toLowerCase();for(const r in t){if(e===null||e===void 0?void 0:e.includes(r)){return t[r]}}return"fallback-card-art"};this.renderCard=r=>{const i=`${this.cuiCardArtBaseUrl}/${this.programShortCode}/cardproducts/${r.cardProductToken}/thumbnail.png`;return t("flex-container",{key:`${r.token}`,class:"card-list-item",flexDirection:"row",style:{cursor:"pointer"},tabIndex:0,onClick:()=>this.handleSelectCard(r.token),onKeyPress:i=>this.handleKeyPress(i,(()=>this.handleSelectCard(r.token)))},this.useFallbackImage[r.token]?t("mq-icon",{class:"card-list-item-img-container",name:this.getCardArt(r),color:"none",height:"37",width:"61"}):t("img",{class:"card-list-item-img-container",src:i,alt:"Your card art",onError:()=>this.handleImageError(r.token),onLoad:()=>this.handleImageLoad(r.token),style:{opacity:this.backgroundImageLoaded[r.token]?"1":"0"}}),t("flex-container",{flexDirection:"column",gap:"var(--spacing-spacing100)",flex:"initial"},t("flex-container",{flexDirection:"column",gap:"0"},t("mq-text",{type:"large",content:r.name,colorType:"primary",style:{fontWeight:"var(--typography-largeBody-strongFontWeight)"}}),r.productType&&t("mq-text",{style:{textTransform:"capitalize"},content:r.productType,colorType:"secondary"})),this.renderCardIconIfDisabled(r.state)),t("mq-icon",{class:"card-list-item-arrow",name:"chevron-right",size:"20px",color:"none",strokeColor:"var(--styles-icons-iconDefaultColor)"}))};this.renderError=()=>t("flex-container",{class:"card-list-error",flexDirection:"column",alignItems:"center",gap:"var(--spacing-spacing400)"},t("mq-text",{content:"Unable to load data"}),t("mq-text",{bold:true,onClick:this.tryToLoadCards,tabIndex:0,class:"card-list-error-refresh",content:"Refresh",colorType:"brand",onKeyPress:r=>this.handleKeyPress(r,(()=>this.tryToLoadCards()))}));this.cuiCardArtBaseUrl=undefined;this.errorMessage=null;this.isLoading=false;this.cards=[];this.cardProductToken=undefined;this.programShortCode=undefined;this.useFallbackImage={};this.backgroundImageLoaded={}}connectedCallback(){c((r=>{if(r){this.loadCards();this.loadEnvConfigVars()}}));this.mqCardListLoadInitiated.emit()}handleKeyPress(r,i){if(r.key==="Enter"){i()}}renderCardIconIfDisabled(r){const i={[p.TERMINATED]:{icon:"terminate",text:"Terminated",colorType:"danger"},[p.SUSPENDED]:{icon:"colored-lock",text:"Locked",colorType:"secondary"},[p.UNACTIVATED]:{icon:"info-thin",text:"Activate card",colorType:"warning"},[p.EXPIRED]:{icon:"caution",text:"Expired",colorType:"danger"}};const e=i[r];if(!e){return null}return t("flex-container",{flexDirection:"row",gap:"var(--spacing-spacing100)",flex:"initial",alignItems:"center"},t("mq-icon",{class:"card-icon",name:e.icon,color:"none",size:"md"}),t("mq-text",{content:e.text,colorType:e.colorType,type:"label"}))}renderBodySkeleton(){return t("div",{class:"bones"},t("flex-container",{class:"content","flex-direction":"row"},t("mq-bone",{width:"80px",height:"45px"}),t("flex-container",{"flex-direction":"column",gap:"var(--spacing-spacing100)"},t("mq-bone",{height:"20px",width:"240px"}),t("mq-bone",{height:"20px",width:"160px"}))),t("flex-container",{class:"content","flex-direction":"row"},t("mq-bone",{width:"80px",height:"45px"}),t("flex-container",{"flex-direction":"column",gap:"var(--spacing-spacing100)"},t("mq-bone",{height:"20px",width:"240px"}),t("mq-bone",{height:"20px",width:"160px"}))),t("flex-container",{class:"content","flex-direction":"row"},t("mq-bone",{width:"80px",height:"45px"}),t("flex-container",{"flex-direction":"column",gap:"var(--spacing-spacing100)"},t("mq-bone",{height:"20px",width:"240px"}),t("mq-bone",{height:"20px",width:"160px"}))))}render(){if(!d.mqCuiReady){return null}return t("theme-provider",null,t("div",{class:"card-list-container"},t("flex-container",{class:"card-list",flexDirection:"column",gap:"0"},this.errorMessage&&this.renderError(),this.isLoading&&this.renderBodySkeleton(),this.cards.map((r=>this.renderCard(r))))))}};b.style=m;export{b as mq_card_list};
//# sourceMappingURL=p-7813fda0.entry.js.map