/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{f as t,u as e}from"./p-675e89df.js";import{f as n,h as o}from"./p-18a64bdb.js";const s=(t,e,n)=>{const o=t.get(e);if(!o){t.set(e,[n])}else if(!o.includes(n)){o.push(n)}};const r=(t,e)=>{let n;return(...o)=>{if(n){clearTimeout(n)}n=setTimeout((()=>{n=0;t(...o)}),e)}};const c=t=>!("isConnected"in t)||t.isConnected;const i=r((t=>{for(let e of t.keys()){t.set(e,t.get(e).filter(c))}}),2e3);const f=()=>{if(typeof n!=="function"){return{}}const t=new Map;return{dispose:()=>t.clear(),get:e=>{const o=n();if(o){s(t,e,o)}},set:e=>{const n=t.get(e);if(n){t.set(e,n.filter(o))}i(t)},reset:()=>{t.forEach((t=>t.forEach(o)));i(t)}}};const a=t=>typeof t==="function"?t():t;const u=(t,e=((t,e)=>t!==e))=>{const n=a(t);let o=new Map(Object.entries(n!==null&&n!==void 0?n:{}));const s={dispose:[],get:[],set:[],reset:[]};const r=()=>{var e;o=new Map(Object.entries((e=a(t))!==null&&e!==void 0?e:{}));s.reset.forEach((t=>t()))};const c=()=>{s.dispose.forEach((t=>t()));r()};const i=t=>{s.get.forEach((e=>e(t)));return o.get(t)};const f=(t,n)=>{const r=o.get(t);if(e(n,r,t)){o.set(t,n);s.set.forEach((e=>e(t,n,r)))}};const u=typeof Proxy==="undefined"?{}:new Proxy(n,{get(t,e){return i(e)},ownKeys(t){return Array.from(o.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(t,e){return o.has(e)},set(t,e,n){f(e,n);return true}});const l=(t,e)=>{s[t].push(e);return()=>{d(s[t],e)}};const p=(e,n)=>{const o=l("set",((t,o)=>{if(t===e){n(o)}}));const s=l("reset",(()=>n(a(t)[e])));return()=>{o();s()}};const m=(...t)=>{const e=t.reduce(((t,e)=>{if(e.set){t.push(l("set",e.set))}if(e.get){t.push(l("get",e.get))}if(e.reset){t.push(l("reset",e.reset))}if(e.dispose){t.push(l("dispose",e.dispose))}return t}),[]);return()=>e.forEach((t=>t()))};const y=t=>{const e=o.get(t);s.set.forEach((n=>n(t,e,e)))};return{state:u,get:i,set:f,on:l,onChange:p,use:m,dispose:c,reset:r,forceUpdate:y}};const d=(t,e)=>{const n=t.indexOf(e);if(n>=0){t[n]=t[t.length-1];t.length--}};const l=(t,e)=>{const n=u(t,e);n.use(f());return n};var p=undefined&&undefined.__rest||function(t,e){var n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0)n[o]=t[o];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++){if(e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s]))n[o[s]]=t[o[s]]}return n};var m;var y;let b="";try{b=(y=window.marqeta)===null||y===void 0?void 0:y.token}catch(t){}const{state:g}=(m=l({mqCuiReady:false,authToken:b}),m),v=p(m,["state"]);let j=0;function w(n,o){let s;const r=t("dna_component_gating");const c=r&&o?e(o):true;const i=t=>{j--;n(t,c);if(j===0){s()}};if(!c){console.warn(`Feature flag or component not enabled for ${o}`)}if(g.mqCuiReady){n(g.mqCuiReady,c)}else{j++;s=v.onChange("mqCuiReady",i)}}const O=v.dispose;const h=v.reset;const C=g;export{v as a,O as d,C as m,w as o,h as r,g as s};
//# sourceMappingURL=p-c7bc8265.js.map