/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{r as t,k as i,i as n,F as e}from"./p-18a64bdb.js";import{o,m as r}from"./p-c7bc8265.js";import{c as s,O as a}from"./p-675e89df.js";import{C as d,H as l}from"./p-cb5bbf71.js";import{D as c,E as u}from"./p-577d1fde.js";import{B as h}from"./p-3b5975cd.js";import"./p-0462f723.js";import"./p-52af63d3.js";import"./p-324125bc.js";import"./p-bc4f08b6.js";const m=".mq-external-account-list{border-radius:var(--components-universal-borderRadius);padding:var(--components-universal-padding);background-color:var(--components-universal-backgroundColor);border:var(--components-universal-borderWidth) solid var(--components-universal-borderColor);overflow:hidden}.container-grid{width:100%;background-color:var(--styles-background-surfacePrimaryColor);border-radius:var(--borderRadius-radius200);border-spacing:unset;border:var(--styles-border-borderWidth) solid var(--styles-border-borderDefaultColor);overflow:hidden}.no-linked-external-accounts{width:100%;background-color:var(--styles-background-surfacePrimaryColor);padding:var(--spacing-spacing600)}.loader-container{width:98%}.container-grid mq-source-card-list-item:last-child .source-card-list-item,.container-grid mq-source-card-list-item:last-child .source-card-list-item-unlink{border-bottom:0}.mq-link-new-account-button{float:right}mq-button.mq-link-new-account-button button{min-width:120px;width:100%}@media (max-width: 575px){.mq-link-new-account-button{width:100%}mq-button.mq-link-new-account-button button{width:100%}}";const v=m;const p=class{constructor(n){t(this,n);this.mqExternalAccountListLoadInitiated=i(this,"mqExternalAccountListLoadInitiated",7);this.mqExternalAccountListLoadCompleted=i(this,"mqExternalAccountListLoadCompleted",7);this.mqExternalAccountListActionTriggered=i(this,"mqExternalAccountListActionTriggered",7);this.mqExternalAccountListActionCompleted=i(this,"mqExternalAccountListActionCompleted",7);this.mqExternalAccountListActionHook=i(this,"mqExternalAccountListActionHook",7);this.handleSourceCardsRequest=async()=>{var t,i,n,e,o,r,l;try{this.isLoading=true;const t=s.get(a);const i=await t.execute();i.data.forEach((t=>{this.sourceCards.push(t)}))}catch(s){const a=((t=s===null||s===void 0?void 0:s.originalError)===null||t===void 0?void 0:t.message)||"EXTERNAL_ACCOUNT_LIST_ERROR";const u=(n=(i=s===null||s===void 0?void 0:s.originalError)===null||i===void 0?void 0:i.debug)===null||n===void 0?void 0:n[0];this.mqExternalAccountListLoadCompleted.emit({status:d.ERROR,error:{code:a,message:(l=(o=(e=u===null||u===void 0?void 0:u.data)===null||e===void 0?void 0:e.error_message)!==null&&o!==void 0?o:(r=u===null||u===void 0?void 0:u.data)===null||r===void 0?void 0:r.description)!==null&&l!==void 0?l:c}});console.log("Error getting source cards:",s)}finally{this.isLoading=false;setTimeout((()=>this.mqExternalAccountListLoadCompleted.emit({status:d.SUCCESS})),0)}};this.handleLinkNewAccountTrigger=()=>{this.mqExternalAccountListActionHook.emit({type:u.LINK_CARD})};this.onUnlinkCard=t=>{this.mqExternalAccountListActionCompleted.emit({type:u.UNLINK_CARD,status:d.SUCCESS,data:{cardToken:t.token}});this.sourceCards=this.sourceCards.filter((i=>i.token!==t.token))};this.onUnlinkCardStart=t=>{this.mqExternalAccountListActionTriggered.emit({type:u.UNLINK_CARD,data:{cardToken:t.token}});this.unlinkingInitiated=true};this.onUnlinkCardReset=()=>{this.unlinkingInitiated=false};this.onUnlinkCardError=(t,i)=>{var n,e,o,r,s,a,l;const h=((n=i===null||i===void 0?void 0:i.originalError)===null||n===void 0?void 0:n.message)||"EXTERNAL_ACCOUNT_LIST_ERROR";const m=(o=(e=i===null||i===void 0?void 0:i.originalError)===null||e===void 0?void 0:e.debug)===null||o===void 0?void 0:o[0];this.mqExternalAccountListActionCompleted.emit({type:u.UNLINK_CARD,data:{cardToken:t.token},status:d.ERROR,error:{code:h,message:(l=(s=(r=m===null||m===void 0?void 0:m.data)===null||r===void 0?void 0:r.error_message)!==null&&s!==void 0?s:(a=m===null||m===void 0?void 0:m.data)===null||a===void 0?void 0:a.description)!==null&&l!==void 0?l:c}});this.unlinkFailed=true;this.unlinkingInitiated=false};this.handleDoneTriggered=()=>{this.mqExternalAccountListActionHook.emit({type:l.ERROR_DONE})};this.showSuccessAndFailureStates=true;this.showTitle=true;this.isLoading=true;this.sourceCards=[];this.unlinkingInitiated=false;this.unlinkFailed=false}connectedCallback(){o((t=>{this.mqExternalAccountListLoadInitiated.emit();t&&this.handleSourceCardsRequest()}))}renderNoExternalAccountsLinked(){return n("mq-text",{colorType:"primary"},"You don't have any external accounts linked. Linking accounts allows you to easily manage accounts and deposit funds.")}renderLoading(){const t=new Array(2).fill(0);return n("theme-provider",null,n("div",{class:"mq-external-account-list"},n("div",{class:"loader-container"},n("mq-bone",{height:"28px",width:"243px"}),n("mq-vspacer",{factor:5}),n("div",{class:"container-grid",style:{overflow:"hidden"}},t.map(((t,i)=>n("host",{key:i},n("flex-container",{flexDirection:"row",alignItems:"center",gap:"16px",justifyContent:"space-between",styleOverride:{padding:"16px"}},n("mq-bone",{height:"32px",width:"32px"}),n("flex-container",{flexDirection:"column",gap:"4px",justifyContent:"space-between",styleOverride:{flex:"1 0 0"}},n("mq-bone",{height:"20px",width:"240px"}),n("mq-bone",{height:"20px",width:"60px"}))))))))))}renderContent(){return n("theme-provider",null,n("div",{class:"mq-external-account-list"},this.showTitle&&n(e,null,n("mq-text",{type:"heading"},"Linked external accounts"),n("mq-vspacer",{factor:5})),this.sourceCards.length===0?this.renderNoExternalAccountsLinked():n("div",{class:"container-grid"},this.sourceCards.map((t=>n("mq-source-card-list-item",{sourceCard:t,onMqUnlinkCardSuccessful:()=>this.onUnlinkCard(t),onMqUnlinkCardCancel:this.onUnlinkCardReset,onMqUnlinkCardStart:()=>this.onUnlinkCardStart(t),onMqUnlinkCardDone:this.onUnlinkCardReset,onMqUnlinkCardFailed:i=>this.onUnlinkCardError(t,i),isAnotherCardUnlinking:this.unlinkingInitiated})))),n("mq-vspacer",{factor:7}),n("mq-button",{class:"mq-link-new-account-button",kind:"primary",styleOverride:{"line-height":"1.375rem",height:"2.75rem"},onClick:this.handleLinkNewAccountTrigger,disabled:this.unlinkingInitiated},"Link new account")))}renderUnlinkFailure(){return n("mq-end-card",{icon:"circle-error",titleText:"Unlink failed",subtitleText:"An error occurred while unlinking your card.",buttonSize:h.large,onMqEndCardButtonClicked:this.handleDoneTriggered})}render(){if(!r.mqCuiReady){return null}if(this.isLoading){return this.renderLoading()}else{if(this.unlinkFailed&&this.showSuccessAndFailureStates){return this.renderUnlinkFailure()}return this.renderContent()}}static get assetsDirs(){return["public"]}};p.style=v;export{p as mq_external_account_list};
//# sourceMappingURL=p-f75918fc.entry.js.map