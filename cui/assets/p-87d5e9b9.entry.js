/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{r as t,k as i,i as s,H as e}from"./p-18a64bdb.js";import{o as a,m as n}from"./p-c7bc8265.js";import{i as r,C as o,b as d}from"./p-ac6d60ea.js";import{c,z as l}from"./p-675e89df.js";import{A as h}from"./p-52af63d3.js";import{D as p,C as m,F as u,B as f}from"./p-1c71d34b.js";import{C as v}from"./p-cb5bbf71.js";import"./p-0462f723.js";const g=".mq-card-parent{display:flex;justify-content:center}.mq-card-parent .flex-container{background:var(--components-universal-backgroundColor);padding:var(--components-universal-padding);border-radius:var(--components-universal-borderRadius);border:var(--components-universal-borderWidth) solid var(--components-universal-borderColor)}.mq-card{position:relative;width:300px;height:186px;perspective:600px}.card-container{width:100%;height:100%;transform-style:preserve-3d;transform-origin:center right;transition:transform 300ms}.card-side{position:absolute;width:100%;height:100%;backface-visibility:hidden}.card-back{transform:rotateY(180deg)}.card-container.is-flipped{transform:translateX(-100%) rotateY(-180deg)}.controls{position:relative}";const y=g;const b=c.get(l);const C=class{constructor(s){t(this,s);this.mqCardLoadInitiated=i(this,"mqCardLoadInitiated",7);this.mqCardLoadCompleted=i(this,"mqCardLoadCompleted",7);this.mqCardActionTriggered=i(this,"mqCardActionTriggered",7);this.mqCardActionCompleted=i(this,"mqCardActionCompleted",7);this.loadCardInfo=async()=>{try{await this.tryToLoadCard()}catch(t){this.handleCardLoadingError(t)}};this.tryToLoadCard=async()=>{this.isLoading=true;this.errorMessage=null;const t=await b.execute(this.cardToken);const{state:i,instrumentType:s}=t;this.cardState=i;this.cardType=r(s)?o.VIRTUAL:o.DIGITAL;this.isLoading=false;h.CardManagement.getCardByTokenSuccess()};this.handleCardInfoRefresh=()=>{this.loadCardInfo()};this.cardToken=undefined;this.canChangeSides=false;this.isLoading=true;this.isBackCardHidden=true;this.displayButton=false;this.cardState=undefined;this.cardType=null;this.errorMessage=null;this.showFrontEvent=undefined;this.showBackEvent=undefined}mqCardFrontLoadCompletedHandler(t){var i;const{detail:s}=t;const e=typeof this.showBackEvent!==undefined&&((i=this.showBackEvent)===null||i===void 0?void 0:i.status)===v.SUCCESS;if(s.status===v.SUCCESS){this.displayButton=true}if(s.status===v.ERROR){this.mqCardLoadCompleted.emit(s)}else if(e){this.mqCardLoadCompleted.emit(s)}this.showFrontEvent=s}mqCardBackLoadCompletedHandler(t){var i;const s=!this.canChangeSides||this.cardType===o.VIRTUAL;const e=this.showFrontEvent!==undefined&&((i=this.showFrontEvent)===null||i===void 0?void 0:i.status)===v.SUCCESS;const{detail:a}=t;if(a.status===v.ERROR){this.mqCardLoadCompleted.emit(a)}else if(s||e){this.mqCardLoadCompleted.emit(a)}this.showBackEvent=a}connectedCallback(){this.mqCardLoadInitiated.emit({data:{cardToken:this.cardToken,cardType:this.cardType}});a((t=>{if(t){this.loadCardInfo()}}))}handleCardLoadingError(t){this.errorMessage=t.message||p;this.isLoading=false;h.CardManagement.Exception(t.message);h.CardManagement.getCardByTokenError()}handleSideChange(){const t=this.isBackCardHidden?m.SHOW_FRONT:m.SHOW_BACK;this.mqCardActionTriggered.emit({type:t,data:{cardToken:this.cardToken,cardType:this.cardType}});this.isBackCardHidden=!this.isBackCardHidden;setTimeout((()=>{this.mqCardActionCompleted.emit({type:t,status:v.SUCCESS,data:{cardToken:this.cardToken,cardType:this.cardType}})}),0)}renderSideChangeButton(){const t=this.isBackCardHidden?u:f;const i=this.isBackCardHidden?"input-show-icon":"input-hide-icon";const e=this.cardState!==d.ACTIVE;const a={padding:"var(--spacing-spacing200) var(--spacing-spacing300)",gap:"var(--spacing-spacing200)",display:this.displayButton?"flex":"none",fontFamily:"var(--typography-smallButton-smallButtonFontFamily)",fontSize:"var(--typography-smallButton-smallButtonFontSize)",fontWeight:"var(--typography-smallButton-smallButtonFontWeight)",lineHeight:"var(--typography-smallButton-smallButtonLineHeight)",letterSpacing:"var(--typography-smallButton-smallButtonLetterSpacing)"};const n=e?"var(--elements-secondaryButton-buttonSecondaryDisabledText)":"var(--elements-secondaryButton-buttonSecondaryText)";return s("mq-button",{type:"button",kind:"secondary",styleOverride:a,onClick:()=>this.handleSideChange(),disabled:e,small:true},s("mq-icon",{name:i,size:"16px",strokeColor:n,color:"transparent"}),this.displayButton&&t)}render(){if(!n.mqCuiReady||this.isLoading){return null}if(this.errorMessage){return s(e,null,s("theme-provider",null,s("div",{class:"mq-card-parent"},s("flex-container",{"flex-direction":"column",justifyContent:"center",alignItems:"center",gap:"var(--spacing-spacing400)"},s("div",{class:`mq-view-card-details`},s("mq-card-error",{onRefreshCardDetailsButtonClick:()=>this.handleCardInfoRefresh()}))))))}if(!this.canChangeSides||this.cardType===o.VIRTUAL){return s(e,null,s("theme-provider",null,s("div",{class:"mq-card-parent"},s("flex-container",{"flex-direction":"column",justifyContent:"center",alignItems:"center",gap:"var(--spacing-spacing400)"},s("div",{class:`mq-card`},s("mq-card-back",{cardToken:this.cardToken,eventProxyParent:this}))))))}return s(e,null,s("theme-provider",null,s("div",{class:"mq-card-parent"},s("flex-container",{"flex-direction":"column",justifyContent:"center",alignItems:"center",gap:"var(--spacing-spacing400)"},s("div",{class:`mq-card`},s("div",{class:`card-container ${this.isBackCardHidden?"":"is-flipped"}`},s("div",{class:"card-side"},s("mq-card-front",{cardToken:this.cardToken,eventProxyParent:this})),s("div",{class:"card-side card-back"},s("mq-card-back",{cardToken:this.cardToken,eventProxyParent:this})))),this.renderSideChangeButton()))))}static get assetsDirs(){return["public"]}};C.style=y;export{C as mq_card};
//# sourceMappingURL=p-87d5e9b9.entry.js.map