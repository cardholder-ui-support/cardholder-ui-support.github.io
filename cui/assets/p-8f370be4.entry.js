/**
 * Cardholder UI Web Components v0.22.0
 * (c) 2024 Marqeta
 * @license MIT
 */
import{r as t,k as e,i,j as n}from"./p-18a64bdb.js";import{K as s}from"./p-577d1fde.js";import{c as r,ad as o}from"./p-675e89df.js";import{A as a}from"./p-52af63d3.js";import"./p-0462f723.js";const c=".source-card-list-item,.source-card-list-item-unlink{padding:var(--spacing-spacing400);border-spacing:unset;border-bottom:var(--styles-border-borderWidth) solid var(--styles-border-borderDefaultColor)}.source-card-list-item-unlink{min-height:44px}.expired-card-unlink{min-height:68px;display:flex;justify-content:center;align-items:center}.source-card-list-item-icon{display:flex;justify-content:center;align-items:center;padding:4px}.unlink-source-card{display:flex;justify-content:center;align-items:center}";const l=c;const d=class{constructor(i){t(this,i);this.mqUnlinkCardSuccessful=e(this,"mqUnlinkCardSuccessful",7);this.mqUnlinkCardStart=e(this,"mqUnlinkCardStart",7);this.mqUnlinkCardDone=e(this,"mqUnlinkCardDone",7);this.mqUnlinkCardCancel=e(this,"mqUnlinkCardCancel",7);this.mqUnlinkCardFailed=e(this,"mqUnlinkCardFailed",7);this.unlinkCard=async()=>{this.isUnlinking=true;const t=r.get(o);try{await t.execute(this.sourceCard.token);this.mqUnlinkCardSuccessful.emit();this.unlinkTriggered=false;a.PullFromCard.unlinkCard()}catch(t){this.unlinkTriggered=false;this.mqUnlinkCardFailed.emit(t);a.PullFromCard.Exception(t.message)}finally{this.isUnlinking=false;this.mqUnlinkCardDone.emit()}};this.unlinkCardTrigger=()=>{this.unlinkTriggered=true;this.mqUnlinkCardStart.emit()};this.unlinkCardTriggerCancel=()=>{this.unlinkTriggered=false;this.mqUnlinkCardCancel.emit()};this.sourceCard=undefined;this.isAnotherCardUnlinking=undefined;this.unlinkTriggered=false;this.isUnlinking=false}getNetworkIcon(){const t=this.sourceCard.network.toLowerCase();if(s.includes(t)){return`${t}-network-icon`}return"default-network-icon"}componentDidUpdate(){const t=this.el.querySelector('.source-card-list-item-unlink button[aria-label="Confirm unlink"]');t===null||t===void 0?void 0:t.focus()}render(){const t=this.getNetworkIcon();const e=this.sourceCard.expiration.split("/");const n=new Date(parseInt(`20${e[1]}`),parseInt(e[0])-1);const s=new Date;const r=n<s?true:false;if(this.unlinkTriggered){return i("div",{class:r?"source-card-list-item-unlink expired-card-unlink":"source-card-list-item-unlink"},i("flex-container",{justifyContent:"flex-end"},i("mq-button",{kind:"secondary","aria-label":"Confirm unlink",onClick:this.unlinkCard,label:"Confirm unlink",loading:this.isUnlinking}),i("mq-button",{kind:"secondary","aria-label":"Cancel",onClick:this.unlinkCardTriggerCancel,label:"Cancel",disabled:this.isUnlinking})))}return i("div",{class:"source-card-list-item"},i("flex-container",{justifyContent:"center"},i("flex-container",{justifyContent:"center"},i("div",{class:"source-card-list-item-icon"},i("mq-icon",{name:t,size:"1.5rem",strokeColor:t!=="default-network-icon"?"":"var(--styles-icons-iconDefaultColor",strokeWidth:"1.5",backgroundColor:"transparent","test-id":"network-icon"})),i("flex-container",{flexDirection:"column",gap:"0",justifyContent:"center"},i("mq-text",{type:"large",colorType:"primary",content:this.sourceCard.funding_source_name,"test-id":"funding-source-name"}),i("mq-text",{type:"",colorType:"secondary",content:this.sourceCard.last_four,"test-id":"funding-source-last-four"}),r&&i("flex-container",{flexDirection:"column",gap:"0"},i("mq-vspacer",{factor:0}),i("flex-container",{flexDirection:"row",gap:"0.25em",alignItems:"center"},i("mq-icon",{strokeColor:"var(--styles-icons-iconErrorColor)",backgroundColor:"transparent",name:"alert-error-icon"}),i("mq-text",{colorType:"danger",content:"Expired",class:"expired-text","test-id":"funding-source-expired-card-text"})))),i("div",{class:"unlink-source-card"},i("mq-button",{label:"Unlink",kind:"tertiary",onClick:this.unlinkCardTrigger,disabled:this.isAnotherCardUnlinking,styleOverride:{"min-width":"0"}})))))}get el(){return n(this)}};d.style=l;export{d as mq_source_card_list_item};
//# sourceMappingURL=p-8f370be4.entry.js.map